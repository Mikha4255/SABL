'use strict'

//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
//"–í–æ—Ç —Ç—ã —Å—é–¥–∞ –∑–∞–≥–ª—è–Ω—É–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç, –∞ –≤–µ–¥—å —è —Å—Ç–∞—Ä–∞–ª—Å—è. –û–Ω –ø—Ä–æ—Å—Ç–æ–π. –ü—Ä–æ–π—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç. –ü—Ä–æ–π–¥–∏ –ø–∂"
const first_btn = document.querySelector('.fuga1_3');
const second_btn = document.querySelector('.a5opka2_3');
const third_btn = document.querySelector('.a42_3');
const sxaxancjancnapijcnij = "MjAyNjA1MDk=";
const anjcndbcishbcihdbihkcanocjan = "NDI=";
const qidqouhisygutfyrytufiguohiphcugyft = "OTg4";
const closeBtn = document.querySelector('.close-modal');
const resetBtn = document.querySelector('.reset-progress');
const resetBtn2 = document.querySelector('.reset-progress2');
let finishing = document.querySelector('.quiz_finish');
const modal = document.querySelector('.modal');
const overlay = document.querySelector('.modal-overlay');
const modalTitle = document.querySelector('.modal-title');
const modalText = document.querySelector('.modal-text');
const bnt = document.querySelector('.goyda');
const bnt42 = document.getElementById('site42');


function showProgressInConsole() {
    const stages = {
        'stage1': '–ü–µ—Ä–≤–∞—è —á–∞—Å—Ç—å: https://d',
        'stage2': '–í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å: isk.yandex.ru/',
        'stage3': '–¢—Ä–µ—Ç—å—è —á–∞—Å—Ç—å: d/MdR_dvpZVhAwLA'
    };
    const completedStages = [];
    if (localStorage.getItem('stage1_completed')) completedStages.push(stages.stage1);
    if (localStorage.getItem('stage2_completed')) completedStages.push(stages.stage2);
    if (localStorage.getItem('stage3_completed')) completedStages.push(stages.stage3);
    if (completedStages.length > 0) {
        console.log('%c‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó', 'color: #ff6600');
        console.log('%c‚ïë   –í–ê–® –ü–†–û–ì–†–ï–°–° –í –ö–í–ï–°–¢–ï   ‚ïë', 'color: #ff6600; font-weight: bold');
        console.log('%c‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù', 'color: #ff6600');
        
        completedStages.forEach((stage, i) => {
            console.log(`%c‚úì ${stage}`, 'color: #4CAF50; font-size: 14px');
        });
        
        console.log(`%c–ü—Ä–æ–≥—Ä–µ—Å—Å: ${completedStages.length}/3 —ç—Ç–∞–ø–æ–≤`, 'color: #2196F3; font-weight: bold');
    }
}

showProgressInConsole();

function getQuestStage() {
    return localStorage.getItem("quest_stage") || "stage1";
}

function setQuestStage(stage) {
    localStorage.setItem("quest_stage", stage);
}

if (!localStorage.getItem("quest_initialized")) {
    localStorage.setItem("quest_initialized", "true");
    setQuestStage("stage1");
}

let currentStage = getQuestStage();

function updateStageUI() {
    first_btn.style.display = 'none';
    second_btn.style.display = 'none';
    third_btn.style.display = 'none';
    switch(currentStage) {
        case "stage1":
            first_btn.style.display = 'block';
            break;
        case "stage2":
            second_btn.style.display = 'block';
            break;
        case "stage3":
            third_btn.style.display = 'block';
            break;
        case "finished":
            finishing.style.display = 'flex';
            finishing.style.opacity = '1';
            resetBtn2.style.display = 'block';
            document.getElementById("text_finish").innerHTML = `<p>–ù—É —á—Ç–æ, –∫–≤–µ—Å—Ç –∑–∞–≤—ë—Ä—à—ë–Ω —Ç–µ–ø–µ—Ä—å —Ç–µ–±–µ –æ—Ç–∫—Ä—ã—Ç <a href="https://disk.yandex.ru/i/4OpLfF8TMFqYwA" target="_blank">–ø–∞–ø–∫–∞ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø—Ä–µ–º–∏–∏ SABL2026</a>, –∞ —Ç–∞–∫–∂–µ –≤–∏–¥–æ—Å–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –∏ —Ç–∞–∫ –±—É–¥–µ—Ç –∑–∞–ø–æ—â–µ–Ω –≤ –¢–ì –∫–∞–Ω–∞–ª–µ.</p>`;
            break;
    }
}

updateStageUI();

function resetProgress() {
    if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–≤–µ—Å—Ç–∞? –°—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–∞.")) {
        localStorage.removeItem('quest_initialized');
        localStorage.removeItem('quest_stage');
        localStorage.removeItem('stage1_completed');
        localStorage.removeItem('stage2_completed');
        localStorage.removeItem('stage3_completed');
        location.reload();
    }
}

resetBtn.addEventListener('click', resetProgress);
resetBtn2.addEventListener('click', resetProgress);

first_btn.addEventListener('click', () => {
    const title = first_btn.dataset.title; 
    const text = first_btn.dataset.text;   
    modalTitle.textContent = title;
    modalText.textContent = text; 
    modal.classList.add('active');
}); 

second_btn.addEventListener('click', () => {
    const title = second_btn.dataset.title; 
    const text = second_btn.dataset.text;   
    modalTitle.textContent = title;
    modalText.textContent = text; 
    document.querySelector('.goyda').placeholder = "–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –∂–∏–∑–Ω–∏, –≤—Å–µ–ª–µ–Ω–Ω–æ–π –∏ –≤–æ–æ–±—â–µ";
    modal.classList.add('active');
});

third_btn.addEventListener('click', () => {
    const title = third_btn.dataset.title; 
    const text = third_btn.dataset.text;   
    modalTitle.textContent = title;
    modalText.textContent = text; 
    document.querySelector('.goyda').placeholder = "–í–≤–µ–¥–∏—Ç–µ –≥–æ–¥ –∫—Ä–µ—â–µ–Ω–∏—è –†—É—Å–∏";
    modal.classList.add('active');
});

bnt.addEventListener('focus', () => {
  bnt.style.borderColor = "#ffd500ff";
  bnt.style.outline = 'none';
});

bnt.addEventListener('blur', () => {
  bnt.style.borderColor = '';
});

closeBtn.addEventListener('click', () => {
  modal.classList.remove('active');
});

overlay.addEventListener('click', () => {
  modal.classList.remove('active');
});

bnt42.addEventListener('click', () => {
  window.open("https://yandex.ru/video/preview/6579578352626963874?text=42%20–∫–ª–∏–ø%20–ø—è—Ç–µ—Ä–∫–∞&path=yandex_search&parent-reqid=1761407840961505-17418252129132845094-balancer-l7leveler-kubr-yp-sas-20-BAL&from_type=vast").focus();
});

let form = document.querySelector("#modal_form");
form.addEventListener("submit", function(event){
    event.preventDefault();
    let data = new FormData(form);
    let user_answ = data.get("code");
    if(currentStage === "stage1" && btoa(user_answ) === sxaxancjancnapijcnij) {
        console.log(`%c‚úì –í–æ—Ç –ø–µ—Ä–≤–∞—è —á–∞—Å—Ç—å —Å—Å—ã–ª–∫–∏: https://d`, 'color: #4CAF50; font-size: 14px');
        setQuestStage("stage2");
        localStorage.setItem('stage1_completed', 'true');
        currentStage = "stage2";
        form.reset(); 
        modal.classList.remove('active');
        updateStageUI();
    } 
    else if(currentStage === "stage2" && btoa(user_answ) === anjcndbcishbcihdbihkcanocjan) {
        console.log(`%c‚úì –í–æ—Ç –≤—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å —Å—Å—ã–ª–∫–∏: isk.yandex.ru/`, 'color: #4CAF50; font-size: 14px');
        setQuestStage("stage3");
        localStorage.setItem('stage2_completed', 'true');
        currentStage = "stage3";
        form.reset();
        modal.classList.remove('active');
        updateStageUI();
    } 
    else if(currentStage === "stage3" && btoa(user_answ) === qidqouhisygutfyrytufiguohiphcugyft) {
        console.log(`%c‚úì –í–æ—Ç —Ç—Ä–µ—Ç—å—è —á–∞—Å—Ç—å —Å—Å—ã–ª–∫–∏: d/MdR_dvpZVhAwLA`, 'color: #4CAF50; font-size: 14px');
        setQuestStage("finished");
        localStorage.setItem('stage3_completed', 'true');
        currentStage = "finished";
        form.reset();
        modal.classList.remove('active');
        updateStageUI();
    } 
    else {
        alert("–ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑");
    }
});


function updateTimer() {
    const targetDate = new Date('2026-02-23T00:00:00').getTime();
    const now = new Date().getTime();
    const timeLeft = targetDate - now;

    if (timeLeft < 0) {
        document.getElementById('timer').innerHTML = '–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª–æ—Å—å';
        return;
    }

    const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
    const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

    document.getElementById('timer').innerHTML = 
        days + ' –¥–Ω–µ–π ' + 
        hours + ' —á–∞—Å–æ–≤ ' + 
        minutes + ' –º–∏–Ω—É—Ç ' +  
        seconds + ' —Å–µ–∫—É–Ω–¥';
}

setInterval(updateTimer, 1000);
updateTimer();


function updateMessage() {
    const message = document.getElementById('opi');
    message.style.display = 'block';
    if (window.innerWidth > 700) {
        message.innerHTML = '–î–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–æ–º–∏–Ω–∞—Ü–∏–∏ –æ—Å—Ç–∞–ª–æ—Å—å:';
        message.style.color = '#ff6600'
        document.getElementById('timer').style.display = 'block';
    } else {
        message.innerHTML = '–õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—É—é –≤–µ—Ä—Å–∏—é —Å–∞–π—Ç–∞';
        message.style.fontSize = '55px';
        message.style.color = '#ae0606'
        document.getElementById('timer').style.display = 'none';
    }
}

updateMessage();

window.addEventListener('resize', updateMessage);

function showYear(event, year) {
    document.getElementById('year2025').style.display = 'none';
    document.getElementById('year2026').style.display = 'none';
    
    document.getElementById('year' + year).style.display = 'block';

    document.querySelectorAll('.archive-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
}

document.addEventListener('DOMContentLoaded', function() {
    document.querySelector('.archive-btn').classList.add('active');
});


const modal2 = document.querySelector('.modal2');
const modalOverlay2 = document.querySelector('.modal-overlay2');
const modalClose2 = document.querySelector('.close-modal2');
const modal2Title = document.querySelector('.modal2-title');
const modal2Text = document.querySelector('.modal2-text');
const modal2Img = document.querySelector('.modal2-img');

function openModal2(title, text, imgSrc) { 
    modal2Title.textContent = title;
    modal2Text.textContent = text;
    modal2Img.src = imgSrc;
    modal2.classList.add('active');
    setTimeout(() => {
        modal2.classList.add('visible');
    }, 200);
}

function closeModal2() {
    modal2.classList.remove('visible');
    setTimeout(() => {
        modal2.classList.remove('active');
    }, 300);
}

modalClose2.addEventListener('click', closeModal2);
modalOverlay2.addEventListener('click', closeModal2);

document.querySelectorAll('#year2026 .most_nom .nomcard').forEach(card => {
    card.addEventListener('click', () => {
        const title = card.dataset.title;
        const text = card.dataset.text;
        const imgSrc = card.dataset.img;
        openModal2(title, text, imgSrc);
    });
});





const images = [
    "–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ_–æ–±—ä–µ–∫—Ç—ã/SABL_1.png",
    "–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ_–æ–±—ä–µ–∫—Ç—ã/SABL_2.png",
    "–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ_–æ–±—ä–µ–∫—Ç—ã/SABL_3.png",
    "–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ_–æ–±—ä–µ–∫—Ç—ã/SABL_4.png",
    "–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ_–æ–±—ä–µ–∫—Ç—ã/SABL_5.png",
    "–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ_–æ–±—ä–µ–∫—Ç—ã/SABL_6.png",
    "–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ_–æ–±—ä–µ–∫—Ç—ã/SABL_7.png",
    "–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ_–æ–±—ä–µ–∫—Ç—ã/SABL_8.png",
    "–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ_–æ–±—ä–µ–∫—Ç—ã/SABL_10.png",
    "–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ_–æ–±—ä–µ–∫—Ç—ã/SABL_11.png",
    "–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ_–æ–±—ä–µ–∫—Ç—ã/SABL_12.png",
];

let imgIndex = 0;
const imgElement = document.getElementById('rotating-image');

function preloadImages() {
    images.forEach(src => { 
        const img = new Image();
        img.src = src;
    });
}

function rotateImage() {
    imgElement.classList.remove('loaded');
    setTimeout(() => {
        imgIndex = (imgIndex + 1) % images.length;
        imgElement.src = images[imgIndex];
        imgElement.classList.add('loaded');
    }, 1000);
}

function initSlideshow() {
    preloadImages();
    imgElement.src = images[0];
    imgElement.classList.add('loaded');
    setInterval(rotateImage, 5500);
}

document.addEventListener('DOMContentLoaded', initSlideshow);


function getHypeIndex() {
    return Math.floor(Math.random() * 100) + 1;
}

function updateHypeIndex() {
    const today = new Date().toDateString();
    const storedData = localStorage.getItem('hypeData');
    if (storedData) {
        const { date, index } = JSON.parse(storedData);
        if (date === today) {
            if(index >= 42){
                document.getElementById('hypeIndexBox').innerHTML = 
                   `<p>üî• –ò–Ω–¥–µ–∫—Å —Ö–∞–π–ø–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è: ${index} <br> ‚úÖ –ê —Ç—ã –Ω–∞ —Ö–∞–π–ø–µ –±—Ä–∞—Ç—É—Ö–∞</p>`;
            } else{
                document.getElementById('hypeIndexBox').innerHTML = 
                    `<p>‚ö†Ô∏è –ò–Ω–¥–µ–∫—Å —Ö–∞–π–ø–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è: ${index} <br> ‚ùå –ù—É –º–∞–ª–æ–≤–∞—Ç–æ –±—Ä–∞—Ç—É—Ö–∞</p>`;
            }
            return; 
        }
    }
    const newIndex = getHypeIndex();
    const newData = {
        date: today,
        index: newIndex
    };
    
    localStorage.setItem('hypeData', JSON.stringify(newData));
    if(index > 42){
        document.getElementById('hypeIndexBox').innerHTML = 
        `<p>üî• –ò–Ω–¥–µ–∫—Å —Ö–∞–π–ø–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è: ${newIndex} <br> ‚úÖ –ê —Ç—ã –Ω–∞ —Ö–∞–π–ø–µ –±—Ä–∞—Ç—É—Ö–∞</p>`;
    } else{
        document.getElementById('hypeIndexBox').innerHTML = 
        `<p>‚ö†Ô∏è –ò–Ω–¥–µ–∫—Å —Ö–∞–π–ø–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è: ${newIndex} <br> ‚ùå –ù—É –º–∞–ª–æ–≤–∞—Ç–æ –±—Ä–∞—Ç—É—Ö–∞</p>`;
    }
}

function setMidnightReset() {
    const now = new Date();
    const tomorrow = new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);
    tomorrow.setHours(0, 0, 0, 0);
    const msUntilMidnight = tomorrow - now;
    setTimeout(() => {
        updateHypeIndex();
        setMidnightReset();
    }, msUntilMidnight);
}

updateHypeIndex();
setMidnightReset();